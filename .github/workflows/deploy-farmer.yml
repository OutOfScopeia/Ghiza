name: Deploy App With Farmer Script

on:
  workflow_dispatch:
  # workflow_run:
  #   workflows: ["Build and Deploy to Azure Container Apps"]
  #   types:
  #     - completed


env:
  BRANCH: ${{ github.ref_name }}
  HASH: ${{ github.sha }}
  TAG: ${{ github.ref_name }}-${{ github.sha }}

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:  
      - name: Log in to Azure
        uses: azure/login@v2.3.0
        with:
          creds: ${{ secrets.AZURE_CREDENTIALS }}

      - name: "Deploy Azure Resources with Farmer script"
        run: dotnet fsi deploy.fsx
                
# jobs:
#   run-fsharp-script:
#     runs-on: ubuntu-latest
#     steps:
#       - name: Checkout repository
#         uses: actions/checkout@v4

#       - name: Install .NET SDK
#         run: |
#           wget https://dot.net/v1/dotnet-install.sh
#           chmod +x dotnet-install.sh
#           ./dotnet-install.sh --install-dir $HOME/dotnet --version latest
#           echo "$HOME/dotnet" >> $GITHUB_PATH

#       - name: Run F# script
#         run: dotnet fsi myscript.fsx
